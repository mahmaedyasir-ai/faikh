<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>كاشير مطعم الفسيخ</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f8ff;
        text-align: center;
        padding: 15px;
    }
    h1 {
        color: #0077b6;
        font-size: 1.8em;
    }
    .product {
        margin: 15px 0;
    }
    input[type="number"] {
        width: 80px;
        padding: 10px;
        margin-right: 10px;
        font-size: 1em;
    }
    button {
        padding: 15px 25px;
        background-color: #0096c7;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 8px;
        font-size: 1em;
        margin: 10px 0;
    }
    button:hover {
        background-color: #0077b6;
    }
    .receipt {
        margin-top: 25px;
        padding: 20px;
        border: 2px solid #0077b6;
        display: inline-block;
        text-align: right;
        min-width: 250px;
        background-color: #e0f7fa;
        font-size: 1em;
    }
    @media (max-width: 400px) {
        input[type="number"] {
            width: 60px;
            padding: 8px;
        }
        button {
            padding: 12px 20px;
            font-size: 0.95em;
        }
        .receipt {
            min-width: 200px;
            font-size: 0.95em;
        }
    }
</style>
</head>
<body>
    <h1>كاشير مطعم الفسيخ</h1>
    <div class="product">
        <label>ربع كيلو فسيخ مفروم:</label>
        <input type="number" id="qty1" value="0" min="0">
        <span>السعر: 6000 جنيه</span>
    </div>
    <div class="product">
        <label>نصف كيلو فسيخ مفروم:</label>
        <input type="number" id="qty2" value="0" min="0">
        <span>السعر: 12000 جنيه</span>
    </div>
    <div class="product">
        <label>كيلو فسيخ مفروم:</label>
        <input type="number" id="qty3" value="0" min="0">
        <span>السعر: 24000 جنيه</span>
    </div>

    <button onclick="calculate()">احسب الفاتورة</button>
    <div class="receipt" id="receipt"></div>

    <script>
        const products = [
            { name: "ربع كيلو فسيخ مفروم", price: 6000, id: "qty1" },
            { name: "نصف كيلو فسيخ مفروم", price: 12000, id: "qty2" },
            { name: "كيلو فسيخ مفروم", price: 24000, id: "qty3" }
        ];

        function calculate() {
            let orders = [];
            let grandTotal = 0;
            products.forEach(p => {
                const qty = parseInt(document.getElementById(p.id).value);
                if (qty > 0) {
                    const total = qty * p.price;
                    orders.push({ item: p.name, quantity: qty, total: total });
                    grandTotal += total;
                }
            });

            if (orders.length === 0) {
                alert('الرجاء إدخال كمية صحيحة');
                return;
            }

            // عرض الفاتورة
            let receiptDiv = document.getElementById('receipt');
            let html = "<h3>الفاتورة:</h3>";
            orders.forEach(o => {
                html += `<p>${o.quantity} × ${o.item} = ${o.total} جنيه</p>`;
            });
            html += `<hr><p><strong>المجموع الكلي: ${grandTotal} جنيه</strong></p>`;

            // زر واتساب بدون موقع
            html += `<button onclick="sendWhatsApp()">أرسل الطلب عبر واتساب</button><br><br>`;

            // زر للحصول على الموقع
            html += `<button onclick="sendLocation()">أرسل موقعي على الخريطة</button>`;

            receiptDiv.innerHTML = html;

            window.orders = orders;
            window.grandTotal = grandTotal;
        }

        function sendWhatsApp() {
            let message = encodeURIComponent("مرحباً، أريد طلب:\n" +
                window.orders.map(o => `${o.quantity} × ${o.item}`).join("\n") +
                `\nالمجموع الكلي: ${window.grandTotal} جنيه\nالرجاء توجيه التحويل وإرسال إشعار الدفع.`);
            window.open(`https://wa.me/249962128045?text=${message}`, '_blank');
        }

        function sendLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    let lat = position.coords.latitude;
                    let lon = position.coords.longitude;
                    let locationLink = `https://www.google.com/maps?q=${lat},${lon}`;
                    let message = encodeURIComponent("مرحباً، هذا موقعي على الخريطة:\n" + locationLink +
                        `\nوأريد الطلب:\n` + window.orders.map(o => `${o.quantity} × ${o.item}`).join("\n") +
                        `\nالمجموع الكلي: ${window.grandTotal} جنيه\nالرجاء توجيه التحويل وإرسال إشعار الدفع.`);
                    window.open(`https://wa.me/249962128045?text=${message}`, '_blank');
                });
            } else {
                alert("عذرًا، متصفحك لا يدعم الحصول على الموقع.");
            }
        }
    </script>
</body>
</html>
